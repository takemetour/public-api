<h1 id='transactions'>Transactions</h1><h2 id='get-all-transactions'>Get All Transactions</h2>
<blockquote>
<p>Code</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.staging.takemetour.com/partner/transactions'</span> <span class="se">\</span>
-H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
-H <span class="s1">'x-access-token: 0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.staging.takemetour.com/partner/transactions'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'x-access-token'</span><span class="p">:</span> <span class="s1">'0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
<span class="p">});</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa68d4dfb446d0013b8c6a0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"booking_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EYK2BJ"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-12T14:23:09.161Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_booked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_charged"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"booking_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"grand_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1057</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_person"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seasoned"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trip"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trip_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-25T17:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trip_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58ff211702b3ea0011efe846"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I can eat all day with the Local Farmer who's name is John1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i-can-eat-all-day-with-local-farmer-who-s-name-is-john"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aa687e57f43ad0012b8d991"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Papa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"J."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="err">...</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a8c073d5d27d70012d3a34f"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"booking_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AKR228"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-20T11:32:13.863Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_booked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_charged"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"booking_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"grand_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_person"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seasoned"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trip_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-21T17:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trip_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a14fccc8d185a001220006d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Behold the Columbia!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"behold-columbia"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a8c073d37308600111de440"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"N."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}]</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request:</strong> <code>GET /transactions</code></p>
<h3 id='response'>Response</h3>
<p>The response will return an Array of Objects. For each object will have these parameters</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><strong>ObjectId</strong></td>
<td>Transaction database ID</td>
</tr>
<tr>
<td>booking_number</td>
<td><strong>String</strong></td>
<td>Transaction reference number</td>
</tr>
<tr>
<td>created_at</td>
<td><strong>String</strong></td>
<td>Transaction create date and time</td>
</tr>
<tr>
<td>is_booked</td>
<td><strong>Boolean</strong></td>
<td>Book status of the transaction</td>
</tr>
<tr>
<td>&lt;!-- is_canceled</td>
<td><strong>Boolean</strong></td>
<td>Cancel status of the transaction --&gt;</td>
</tr>
<tr>
<td>is_charged</td>
<td><strong>Boolean</strong></td>
<td>Payment status of the transaction (if it&#39;s <code>true</code> it means the payment has already been paid for this transaction)</td>
</tr>
<tr>
<td>is_confirmed</td>
<td><strong>Boolean</strong></td>
<td>Comfirmation status of the transaction (if it&#39;s <code>true</code> it means the Local Expert / Supplyer has confirmed the trip / ticket for this transaction)</td>
</tr>
<tr>
<td>price</td>
<td><strong>Object</strong></td>
<td>Pricing object</td>
</tr>
<tr>
<td>product_type</td>
<td><strong>Strig</strong></td>
<td>This value indentify the type of product. The value can be <code>trip</code> for Local Experience Trips, <code>ticket</code> for Attraction Tickets, and <code>souvenir</code> for Tangible Products (data sim, souvenir, etc.)</td>
</tr>
<tr>
<td>quantity</td>
<td><strong>Integer</strong></td>
<td>For Local Experience Trips, it is number of guest(s) who join the trip. For Tangible Product, it is number of item(s)</td>
</tr>
<tr>
<td>trip_date</td>
<td><strong>String</strong></td>
<td>For Local Experience Trips, it is the date when trip will happen. For Tickets, it is the date when customer will enter the attraction. For Tangible Products, it is the date when product will be delivered</td>
</tr>
<tr>
<td>trip_id</td>
<td><strong>Object</strong></td>
<td>Information of product, which contains database ID, slug, and name of production</td>
</tr>
<tr>
<td>user_id</td>
<td><strong>Object</strong></td>
<td>Information of provider (Local Expert / Supplyer), which contains database ID, slug, and name of provider</td>
</tr>
</tbody></table>
<h2 id='transaction-detail'>Transaction Detail</h2>
<blockquote>
<p>Code</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.staging.takemetour.com/partner/transactions/5aaf7caa551d7a00116ea4fb'</span> <span class="se">\</span>
-H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
-H <span class="s1">'x-access-token: 0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.staging.takemetour.com/partner/transactions/5aaf7caa551d7a00116ea4fb'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'x-access-token'</span><span class="p">:</span> <span class="s1">'0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span><span class="p">,</span>
<span class="p">});</span>
<span class="kr">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5aaf76d7551d7a00116ea36b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trip_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-16T17:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"booking_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0MZLNH"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"local_expert_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a14fccc8d185a001220006d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TakeMeTour"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"L."</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"takemetour-l"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"trip_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a14facc8d185a001220006d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sea Life Ocean World"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sea-life-ocean-word"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a14fdcc8d185a001220006d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T."</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo-t"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_tried_to_booked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_booked_globaltix"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"product_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"multi_tier_quantity"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a5733e148838c0011058416"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"บัตรผ่านประตูวันหยุด"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_tiers"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="s2">"globaltix_cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">270</span><span class="p">,</span><span class="w">
      </span><span class="s2">"has_availability"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_questions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11969</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Service Date"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-17"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11970</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nationality"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FREETEXT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thai"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11971</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Select Time"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPTION"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Afternoon"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Morning"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morning"</span><span class="w">
      </span><span class="p">}],</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a5733e148838c0011058418"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adult"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_ticket_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4138"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_redeem"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-31T23:59:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-10T00:00:00"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"globaltix_cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w">
      </span><span class="s2">"has_availability"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_questions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11969</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Service Date"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DATE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-17"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11970</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nationality"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FREETEXT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Thai"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11971</span><span class="p">,</span><span class="w">
        </span><span class="s2">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Select Time"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OPTION"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"Afternoon"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"Morning"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"answer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morning"</span><span class="w">
      </span><span class="p">}],</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a5733e148838c0011058417"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Child"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_ticket_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4139"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"globaltix_redeem"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-31T23:59:00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-10T00:00:00"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}],</span><span class="w">
  </span><span class="p">},</span><span class="w"> </span><span class="err">...</span><span class="p">],</span><span class="w">
  </span><span class="s2">"is_charged"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">//</span><span class="w">   </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Demo"</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w">   </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ticket"</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="s2">"is_instant"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_canceled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_confirmed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"is_partner_booked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_booked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19T08:37:44.363Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19T08:37:43.891Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"THB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"perPerson"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"discounted"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"grandTotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">2800</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bookingFee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seasoned"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"seasonedDiscountedPerPerson"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"redeemDiscount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displayPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"noRedeemPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"displaySeasonedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"minimumRedeemMismatch"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"actualBookingFee"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"total_lx_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"redeem"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"partner_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a8b9cf537308600111de430"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"booked_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19T08:37:44.131Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"charged_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19T08:37:44.478Z"</span><span class="p">,</span><span class="w">
  </span><span class="err">//</span><span class="w"> </span><span class="s2">"charged_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"partner"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19T08:37:44.363Z"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>HTTP Request:</strong> <code>GET /transactions/:id</code></p>
<h3 id='response-2'>Response</h3>
<p>The response will return transaction object</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><strong>ObjectId</strong></td>
<td>Transaction database ID</td>
</tr>
<tr>
<td>booking_number</td>
<td><strong>String</strong></td>
<td>Transaction reference number</td>
</tr>
<tr>
<td>created_at</td>
<td><strong>String</strong></td>
<td>Transaction create date and time</td>
</tr>
<tr>
<td>is_booked</td>
<td><strong>Boolean</strong></td>
<td>Book status of the transaction</td>
</tr>
<tr>
<td>&lt;!-- is_canceled</td>
<td><strong>Boolean</strong></td>
<td>Cancel status of the transaction --&gt;</td>
</tr>
<tr>
<td>is_charged</td>
<td><strong>Boolean</strong></td>
<td>Payment status of the transaction (if it&#39;s <code>true</code> it means the payment has already been paid for this transaction)</td>
</tr>
<tr>
<td>is_confirmed</td>
<td><strong>Boolean</strong></td>
<td>Comfirmation status of the transaction. If it&#39;s <code>true</code> it means the Local Expert / Supplyer has confirmed the trip / ticket for this transaction. (some products on TakeMeTour have limited availability, so it need to be confirmed by Local Expert / Supplyer before complete the transaction)</td>
</tr>
<tr>
<td>is_instant</td>
<td><strong>Boolean</strong></td>
<td>Indicate the availability status of the product. If it&#39;s <code>true</code> it means the Local Expert / Supplyer will do the instant confirm once the product has been paid (Automatically comfirm by the system)</td>
</tr>
<tr>
<td>price</td>
<td><strong>Object</strong></td>
<td>Pricing object</td>
</tr>
<tr>
<td>product_type</td>
<td><strong>Strig</strong></td>
<td>This value indentify the type of product. The value can be <code>trip</code> for Local Experience Trips, <code>ticket</code> for Attraction Tickets, and <code>souvenir</code> for Tangible Products (data sim, souvenir, etc.)</td>
</tr>
<tr>
<td>quantity</td>
<td><strong>Integer</strong></td>
<td>For Local Experience Trips, it is number of guest(s) who join the trip. For Tangible Product, it is number of item(s). <strong>For Attraction Tickets, this param will be null</strong></td>
</tr>
<tr>
<td>multi_tier_quantity</td>
<td><strong>Array</strong></td>
<td>For Attraction Tickets, it contains multiple tiers and subtiers of attraction ticket with detail of quantity and additional mandatory questions &amp; answers. <strong>For Local Experience Trips and Tangible Product, this param will be empty array</strong></td>
</tr>
<tr>
<td>trip_date</td>
<td><strong>String</strong></td>
<td>For Local Experience Trips, it is the date when trip will happen. For Tickets, it is the date when customer will enter the attraction. For Tangible Products, it is the date when product will be delivered</td>
</tr>
<tr>
<td>trip_id</td>
<td><strong>Object</strong></td>
<td>Information of product, which contains database ID, slug, and name of production</td>
</tr>
<tr>
<td>local_expert_id</td>
<td><strong>Object</strong></td>
<td>Information of provider (Local Expert / Supplyer), which contains database ID, slug, and name of provider</td>
</tr>
<tr>
<td>user_id</td>
<td><strong>Object</strong></td>
<td>Information of customer, which contains database ID, slug, and name of provider</td>
</tr>
<tr>
<td>booked_at</td>
<td><strong>String</strong></td>
<td>Transaction book date and time</td>
</tr>
<tr>
<td>confirmed_at</td>
<td><strong>String</strong></td>
<td>Transaction confirm date and time</td>
</tr>
<tr>
<td>charged_date</td>
<td><strong>String</strong></td>
<td>Transaction charge date and time</td>
</tr>
</tbody></table>
<h2 id='voucher'>Voucher</h2>
<blockquote>
<p>Code</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -o voucher.pdf <span class="se">\</span>
<span class="s1">'https://api.staging.takemetour.com/partner/transactions/5aaf7caa551d7a00116ea4fb/voucher'</span> <span class="se">\</span>
-H <span class="s1">'x-access-token: 0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="p">{</span> <span class="nx">saveAs</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'file-saver'</span>

<span class="kr">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://api.staging.takemetour.com/partner/transactions/5aaf7caa551d7a00116ea4fb/voucher'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">'content-type'</span><span class="p">:</span> <span class="s1">'application/pdf'</span><span class="p">,</span>
    <span class="s1">'x-access-token'</span><span class="p">:</span> <span class="s1">'0TKOeCA5sLimUiGYcIdWOb9NoiYEgJJ3'</span>
  <span class="p">},</span>
  <span class="na">responseType</span><span class="p">:</span> <span class="s1">'blob'</span>
<span class="p">});</span>
<span class="kr">const</span> <span class="nx">blob</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">response</span><span class="p">.</span><span class="nx">blob</span><span class="p">();</span>

<span class="nx">saveAs</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="s1">'voucher.pdf'</span><span class="p">);</span>
</code></pre>
<p><strong>HTTP Request:</strong> <code>GET /transactions/:id/voucher</code></p>
<h3 id='response-3'>Response</h3>
<p>The response will be PDF file <strong>(please make sure you pass access token in header or cookie)</strong></p>

<p>Example of voucher <a href="https://github.com/takemetour/public-api/blob/master/material/booking-voucher.pdf">PDF Voucher</a>
<img src="https://raw.githubusercontent.com/takemetour/public-api/master/material/booking-voucher.png" alt="Image of voucher" /></p>

<p>Some Attraction Tickets voucher will look like this <a href="https://github.com/takemetour/public-api/blob/master/material/ticket-voucher.pdf">PDF Ticket Voucher</a>
<img src="https://raw.githubusercontent.com/takemetour/public-api/master/material/ticket-voucher.png" alt="Image of Attraction Tickets voucher" /></p>
